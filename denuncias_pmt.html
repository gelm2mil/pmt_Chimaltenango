<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DENUNCIAS — PMT CHIMALTENANGO</title>

<style>
:root {
    --c1:#ff2dff;
    --c2:#a11cff;
    --c3:#00fff2;
    --c4:#ff66c4;
    --dark:#0b0013;
    --panel:#10001b;
    --border:#2d0054;
    --neonGreen:#00ff99;
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
    font-family:"Segoe UI", sans-serif;
    background:linear-gradient(120deg,#0b0013,#0a0030,#0b0013);
    color:white;
    padding-bottom:80px;
}

.encabezado {
    text-align:center;
    padding:30px 15px 15px;
    color:var(--c3);
    text-shadow:0 0 20px var(--c3);
    font-size:28px;
    font-weight:bold;
}

.sub { text-align:center; margin-top:-5px; color:#ccc; }

.logo-top {
    width:110px;
    display:block;
    margin:0 auto;
    filter:drop-shadow(0 0 15px var(--c3));
}

.panel {
    width:95%;
    max-width:1100px;
    margin:25px auto;
    background:#0f001a;
    border-radius:16px;
    padding:25px;
    box-shadow:0 0 25px #290047;
    border:2px solid #3a006b;
}

input, select, textarea {
    width:100%;
    padding:10px;
    background:#20002e;
    border:2px solid #3b006c;
    color:white;
    border-radius:10px;
    margin-top:8px;
    outline:none;
}

textarea { height:80px; }

label {
    margin-top:12px;
    display:block;
    color:var(--c3);
}

.boton-correo {
    margin-top:18px;
    display:inline-block;
    padding:12px 20px;
    border-radius:12px;
    background:var(--c1);
    color:white;
    cursor:pointer;
    font-weight:bold;
    box-shadow:0 0 15px var(--c1);
    border:none;
    transition:0.2s;
}

.boton-correo:hover {
    transform:scale(1.05);
    box-shadow:0 0 20px var(--c1);
}

.boton-guardar {
    margin-top:18px;
    display:inline-block;
    padding:12px 20px;
    border-radius:12px;
    background:var(--neonGreen);
    color:black;
    cursor:pointer;
    font-weight:bold;
    box-shadow:0 0 15px var(--neonGreen);
    border:none;
    transition:0.2s;
    margin-left:10px;
}

.boton-guardar:hover {
    transform:scale(1.05);
    box-shadow:0 0 20px var(--neonGreen);
}

.fila-flex {
    display:flex;
    gap:15px;
}

.fila-flex .col {
    flex:1;
}
</style>

</head>
<body>

<img src="https://gelm2mil.github.io/2026/gelm.png" class="logo-top" />
<div class="encabezado">DENUNCIAS — PMT CHIMALTENANGO</div>
<div class="sub">Registro profesional de denuncias con evidencia</div>

<div class="panel">

    <!-- FORMULARIO GENERAL -->
    <form id="formDenuncia" enctype="multipart/form-data">

        <h3 style="color: var(--c3); margin-bottom: 10px;">Nueva denuncia</h3>

        <div class="fila-flex">
            <div class="col">
                <label>Fecha</label>
                <input id="fecha" type="text" placeholder="dd/mm/aaaa" required>
            </div>
            <div class="col">
                <label>Hora</label>
                <input id="hora" type="text" placeholder="--:--" required>
            </div>
        </div>

        <label>Placa / DPI / Motor</label>
        <input id="placa" placeholder="Placa vehículo, DPI o número de motor" required>

        <div class="fila-flex">
            <div class="col">
                <label>Tipo de denuncia</label>
                <select id="tipo">
                    <option>Transporte ilegal</option>
                    <option>Mal servicio</option>
                    <option>Exceso pasajero</option>
                    <option>Irrespeto PMT</option>
                    <option>Otros</option>
                </select>
            </div>
            <div class="col">
                <label>Estado</label>
                <select id="estado">
                    <option>Pendiente</option>
                    <option>En investigación</option>
                    <option>Finalizado</option>
                </select>
            </div>
        </div>

        <label>Lugar</label>
        <input id="lugar" placeholder="Sector, ruta, referencia, etc.">

        <label>Descripción del hecho</label>
        <textarea id="descripcion"></textarea>

        <label>Observaciones internas (uso PMT)</label>
        <textarea id="interno"></textarea>

        <label>Imagen / evidencia (opcional)</label>
        <input type="file" id="foto" accept="image/*">

        <!-- BOTONES -->
        <button class="boton-correo" type="button" onclick="enviarCorreo()">ENVIAR DENUNCIA</button>
        <button class="boton-guardar" type="button" onclick="enviarBD()">AGREGAR DENUNCIA</button>

    </form>

</div>

<script>

// ----------------------
// BOTÓN 1: ENVIAR CORREO
// ----------------------
function enviarCorreo(){
    let form = document.createElement("form");
    form.method = "POST";
    form.action = "https://formsubmit.co/nerox2mil@proton.me";
    form.enctype = "multipart/form-data";

    let campos = {
        Fecha: fecha.value,
        Hora: hora.value,
        Placa: placa.value,
        Tipo: tipo.value,
        Estado: estado.value,
        Lugar: lugar.value,
        Descripcion: descripcion.value,
        Interno: interno.value,
    };

    for(let c in campos){
        let input = document.createElement("input");
        input.type = "hidden";
        input.name = c;
        input.value = campos[c];
        form.appendChild(input);
    }

    document.body.appendChild(form);
    form.submit();
}

// ----------------------
// BOTÓN 2: GUARDAR EN MYSQL
// ----------------------
function enviarBD(){
    const datos = new FormData();

    datos.append("fecha", fecha.value);
    datos.append("hora", hora.value);
    datos.append("placa", placa.value);
    datos.append("tipo", tipo.value);
    datos.append("estado", estado.value);
    datos.append("lugar", lugar.value);
    datos.append("descripcion", descripcion.value);
    datos.append("interno", interno.value);

    let archivo = foto.files[0];
    if(archivo){ datos.append("foto", archivo.name); }
    else{ datos.append("foto",""); }

    fetch("https://gelmhistoria.webcindario.com/guardar.php", {
        method: "POST",
        body: datos
    })
    .then(r => r.json())
    .then(res => {
        alert(res.msg);
        if(res.status === "ok"){
            document.getElementById("formDenuncia").reset();
        }
    })
    .catch(() => alert("Error enviando datos a base de datos"));
}

</script>

</body>
</html>
