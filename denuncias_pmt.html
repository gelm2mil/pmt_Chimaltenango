<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DENUNCIAS — PMT CHIMALTENANGO</title>

<style>
:root {
    --c1:#ff2dff;
    --c2:#a11cff;
    --c3:#00fff2;
    --c4:#ff66c4;
    --dark:#0b0013;
    --panel:#10001b;
    --border:#2d0054;
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
    font-family:"Segoe UI", sans-serif;
    background:linear-gradient(120deg,#0b0013,#0a0030,#0b0013);
    color:white;
    padding-bottom:80px;
}

.encabezado {
    text-align:center;
    padding:30px 15px 15px;
    color:var(--c3);
    text-shadow:0 0 20px var(--c3);
    font-size:28px;
    font-weight:bold;
}

.sub { text-align:center; margin-top:-5px; color:#ccc; }

.logo-top {
    width:110px;
    display:block;
    margin:0 auto;
    filter:drop-shadow(0 0 15px var(--c3));
}

.panel {
    width:95%;
    max-width:1100px;
    margin:25px auto;
    background:#0f001a;
    border-radius:16px;
    padding:25px;
    box-shadow:0 0 25px #290047;
    border:2px solid #3a006b;
}

input, select, textarea {
    width:100%;
    padding:10px;
    background:#20002e;
    border:2px solid #3b006c;
    color:white;
    border-radius:10px;
    margin-top:8px;
    outline:none;
}

textarea { height:80px; }

label {
    margin-top:12px;
    display:block;
    color:var(--c3);
}

.boton {
    margin-top:18px;
    display:inline-block;
    padding:12px 20px;
    border-radius:12px;
    background:var(--c1);
    color:white;
    cursor:pointer;
    font-weight:bold;
    box-shadow:0 0 15px var(--c1);
    border:none;
    transition:0.2s;
}

.boton:hover {
    transform:scale(1.05);
    box-shadow:0 0 20px var(--c1);
}

.fila-flex {
    display:flex;
    gap:15px;
}

.fila-flex .col {
    flex:1;
}
</style>

</head>
<body>

<img src="https://gelm2mil.github.io/2026/gelm.png" class="logo-top" />
<div class="encabezado">DENUNCIAS — PMT CHIMALTENANGO</div>
<div class="sub">Registro profesional de denuncias con evidencia</div>

<div class="panel">

    <!-- FORMULARIO QUE ENVÍA AL PHP -->
    <form id="formDenuncia" enctype="multipart/form-data">

        <h3 style="color: var(--c3); margin-bottom: 10px;">Nueva denuncia</h3>

        <div class="fila-flex">
            <div class="col">
                <label>Fecha</label>
                <input id="fecha" type="text" placeholder="dd/mm/aaaa" required>
            </div>
            <div class="col">
                <label>Hora</label>
                <input id="hora" type="text" placeholder="--:--" required>
            </div>
        </div>

        <label>Placa / DPI / Motor</label>
        <input id="placa" placeholder="Placa vehículo, DPI o número de motor" required>

        <div class="fila-flex">
            <div class="col">
                <label>Tipo de denuncia</label>
                <select id="tipo">
                    <option>Transporte ilegal</option>
                    <option>Mal servicio</option>
                    <option>Exceso pasajero</option>
                    <option>Irrespeto PMT</option>
                    <option>Otros</option>
                </select>
            </div>
            <div class="col">
                <label>Estado</label>
                <select id="estado">
                    <option>Pendiente</option>
                    <option>En investigación</option>
                    <option>Finalizado</option>
                </select>
            </div>
        </div>

        <label>Lugar</label>
        <input id="lugar" placeholder="Sector, ruta, referencia, etc.">

        <label>Descripción del hecho</label>
        <textarea id="descripcion"></textarea>

        <label>Observaciones internas (uso PMT)</label>
        <textarea id="interno"></textarea>

        <label>Imagen / evidencia (opcional)</label>
        <input type="file" id="foto" accept="image/*">

        <button class="boton" type="button" onclick="enviarDenuncia()">ENVIAR DENUNCIA</button>

    </form>

</div>

<script>
function enviarDenuncia(){
    const datos = new FormData();

    datos.append("fecha", document.getElementById("fecha").value);
    datos.append("hora", document.getElementById("hora").value);
    datos.append("placa", document.getElementById("placa").value);
    datos.append("tipo", document.getElementById("tipo").value);
    datos.append("estado", document.getElementById("estado").value);
    datos.append("lugar", document.getElementById("lugar").value);
    datos.append("descripcion", document.getElementById("descripcion").value);
    datos.append("interno", document.getElementById("interno").value);

    let archivo = document.getElementById("foto").files[0];
    if(archivo){
        datos.append("foto", archivo.name);
    } else {
        datos.append("foto", "");
    }

    fetch("https://gelmhistoria.webcindario.com/guardar.php", {
        method: "POST",
        body: datos
    })
    .then(r => r.json())
    .then(res => {
        alert(res.msg);
        if(res.status === "ok"){
            document.getElementById("formDenuncia").reset();
        }
    })
    .catch(() => alert("Error enviando denuncia"));
}
</script>

</body>
</html>
