<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DENUNCIAS — PMT CHIMALTENANGO</title>

<style>
/* … TU CSS … (lo dejé igual que lo mandaste) */
</style>

</head>
<body>

<img src="https://gelm2mil.github.io/2026/gelm.png" class="logo-top" />
<div class="encabezado">DENUNCIAS — PMT CHIMALTENANGO</div>
<div class="sub">Registro profesional de denuncias con evidencia</div>

<div class="panel">

    <form id="form-denuncia" enctype="multipart/form-data">

        <h3 style="color: var(--c3); margin-bottom: 10px;">Nueva denuncia</h3>

        <div class="fila-flex">
            <div class="col">
                <label>Fecha</label>
                <input type="text" name="fecha" id="fecha" placeholder="dd/mm/aaaa" required>
            </div>
            <div class="col">
                <label>Hora</label>
                <input type="text" name="hora" id="hora" placeholder="--:--" required>
            </div>
        </div>

        <label>Placa / DPI / Motor</label>
        <input name="placa" id="placa" placeholder="Placa vehículo, DPI o motor" required>

        <div class="fila-flex">
            <div class="col">
                <label>Tipo de denuncia</label>
                <select name="tipo" id="tipo">
                    <option>Transporte ilegal</option>
                    <option>Mal servicio</option>
                    <option>Exceso pasajero</option>
                    <option>Irrespeto PMT</option>
                    <option>Otros</option>
                </select>
            </div>
            <div class="col">
                <label>Estado</label>
                <select name="estado" id="estado">
                    <option>Pendiente</option>
                    <option>En investigación</option>
                    <option>Finalizado</option>
                </select>
            </div>
        </div>

        <label>Lugar</label>
        <input name="lugar" id="lugar" placeholder="Sector, ruta, referencia">

        <label>Descripción del hecho</label>
        <textarea name="descripcion" id="descripcion"></textarea>

        <label>Observaciones internas (uso PMT)</label>
        <textarea name="interno" id="interno"></textarea>

        <label>Imagen / evidencia (opcional)</label>
        <input type="file" name="foto" id="foto" accept="image/*">

        <!-- BOTON 1: Enviar correo -->
        <button class="boton" type="submit" id="btn-correo">ENVIAR DENUNCIA</button>

        <!-- BOTON 2: Guardar en MySQL -->
        <button class="boton" type="button" id="btn-guardar" style="background:#00eaff;margin-left:10px;">
            AGREGAR DENUNCIA (PMT)
        </button>

    </form>

</div>


<!-- =============================================================== -->
<!-- ===============   MARCO DE JAVASCRIPT (VA AQUÍ)   ============= -->
<!-- =============================================================== -->

<script>
document.getElementById("btn-guardar").addEventListener("click", async () => {

    const formData = new FormData();
    formData.append("fecha", fecha.value);
    formData.append("hora", hora.value);
    formData.append("placa", placa.value);
    formData.append("tipo", tipo.value);
    formData.append("estado", estado.value);
    formData.append("lugar", lugar.value);
    formData.append("descripcion", descripcion.value);
    formData.append("interno", interno.value);

    if(document.getElementById("foto").files.length > 0){
        formData.append("foto", document.getElementById("foto").files[0]);
    }

    const respuesta = await fetch("https://gelmhistoria.webcindario.com/guardar.php", {
        method: "POST",
        body: formData
    });

    const data = await respuesta.json();

    if(data.status === "ok"){
        alert("✅ Denuncia guardada en el sistema PMT");
    } else {
        alert("❌ Error al guardar: " + data.msg);
    }
});
</script>

</body>
</html>
